
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Welcome to janome’s documentation! (English) &#8212; Janome v0.3 documentation (en)</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/bronze-25C9.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="#">
          <span>Janome v0.3 documentation (en)</span></a></h1>
        <h2 class="heading"><span>Welcome to janome’s documentation! (English)</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="#">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <a href="https://github.com/mocobeta/janome"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a><div class="section" id="welcome-to-janome-s-documentation-english">
<h1>Welcome to janome’s documentation! (English)<a class="headerlink" href="#welcome-to-janome-s-documentation-english" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://mocobeta.github.io/janome/">日本語</a></p>
<div class="section" id="what-s-janome">
<h2>What’s Janome?<a class="headerlink" href="#what-s-janome" title="Permalink to this headline">¶</a></h2>
<div class="figure align-right" id="id3">
<a class="reference internal image-reference" href="_images/janome_small.jpg"><img alt="_images/janome_small.jpg" src="_images/janome_small.jpg" style="width: 289.40000000000003px; height: 407.8px;" /></a>
<p class="caption"><span class="caption-text">Illustration by <a class="reference external" href="https://janomeekaki.wixsite.com/janome">janome</a>. All rights reserved.</span></p>
</div>
<p>Janome (蛇の目) is a Japanese morphological analysis engine (or tokenizer, pos-tagger) written in pure Python including the built-in dictionary and the language model.</p>
<p>We aim to build a library which is easy to install and provides concise, well-designed APIs for various python applications.</p>
<p>Janome uses mecab-ipadic-2.7.0-20070801 as the built-in dictionary. Also Japanese new era “令和” (Reiwa) has been added to the dictionary since v0.3.8.</p>
</div>
<div class="section" id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/mocobeta/janome">https://github.com/mocobeta/janome</a></p>
<p>If you like janome, please star the repository! :)</p>
</div>
<div class="section" id="api-reference">
<h2>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://mocobeta.github.io/janome/api/">https://mocobeta.github.io/janome/api/</a></p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>Python 2.7.x or Python 3.3+ interpreter</p>
</div>
<div class="section" id="latest-version">
<h2>Latest version<a class="headerlink" href="#latest-version" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>janome: 0.3.8</li>
</ul>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pypi">
<h3>PyPI<a class="headerlink" href="#pypi" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://pypi.python.org/pypi/Janome">https://pypi.python.org/pypi/Janome</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install janome
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This requires 500 to 600 MB RAM for pre-compiling the dictionary data.</p>
</div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Create janome.tokenizer.Tokenizer object and call tokenize() method with the sentences you want to analyze.</p>
<p>The return value is a list of Token objects. Token includes morphologic information such as surface form, part-of-speech. See <a class="reference external" href="http://mocobeta.github.io/janome/api/janome.html#janome.tokenizer.Token">reference</a> for more details.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.tokenizer</span> <span class="k">import</span> <span class="n">Tokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;すもももももももものうち&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">すもも 名詞,一般,*,*,*,*,すもも,スモモ,スモモ</span>
<span class="go">も    助詞,係助詞,*,*,*,*,も,モ,モ</span>
<span class="go">もも  名詞,一般,*,*,*,*,もも,モモ,モモ</span>
<span class="go">も    助詞,係助詞,*,*,*,*,も,モ,モ</span>
<span class="go">もも  名詞,一般,*,*,*,*,もも,モモ,モモ</span>
<span class="go">の    助詞,連体化,*,*,*,*,の,ノ,ノ</span>
<span class="go">うち  名詞,非自立,副詞可能,*,*,*,うち,ウチ,ウチ</span>
</pre></div>
</div>
<div class="section" id="for-windows-users">
<h3>for Windows users<a class="headerlink" href="#for-windows-users" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">decode('utf8')</span></code> if the output is garbled.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.tokenizer</span> <span class="k">import</span> <span class="n">Tokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;すもももももももものうち&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">token</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-use-with-user-defined-dictionary">
<h2>How to use with user defined dictionary<a class="headerlink" href="#how-to-use-with-user-defined-dictionary" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mecab-ipadic-format">
<h3>MeCab IPADIC format<a class="headerlink" href="#mecab-ipadic-format" title="Permalink to this headline">¶</a></h3>
<p>You can add custom entries besides the built-in dictionary at runtime by using user defined dictionary.</p>
<p>Default dictionary format is equal to MeCab IPADIC format. Create a CSV file as below and pass the file path and the character encoding to Tokenizer’s constructor.</p>
<p>See the <a class="reference external" href="http://taku910.github.io/mecab/dic.html">MeCab document</a> for more details.</p>
<p>userdic.csv</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">東京スカイツリー</span><span class="p">,</span><span class="mi">1288</span><span class="p">,</span><span class="mi">1288</span><span class="p">,</span><span class="mi">4569</span><span class="p">,</span><span class="n">名詞</span><span class="p">,</span><span class="n">固有名詞</span><span class="p">,</span><span class="n">一般</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">東京スカイツリー</span><span class="p">,</span><span class="n">トウキョウスカイツリー</span><span class="p">,</span><span class="n">トウキョウスカイツリー</span>
<span class="n">東武スカイツリーライン</span><span class="p">,</span><span class="mi">1288</span><span class="p">,</span><span class="mi">1288</span><span class="p">,</span><span class="mi">4700</span><span class="p">,</span><span class="n">名詞</span><span class="p">,</span><span class="n">固有名詞</span><span class="p">,</span><span class="n">一般</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">東武スカイツリーライン</span><span class="p">,</span><span class="n">トウブスカイツリーライン</span><span class="p">,</span><span class="n">トウブスカイツリーライン</span>
<span class="n">とうきょうスカイツリー駅</span><span class="p">,</span><span class="mi">1288</span><span class="p">,</span><span class="mi">1288</span><span class="p">,</span><span class="mi">4143</span><span class="p">,</span><span class="n">名詞</span><span class="p">,</span><span class="n">固有名詞</span><span class="p">,</span><span class="n">一般</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">とうきょうスカイツリー駅</span><span class="p">,</span><span class="n">トウキョウスカイツリーエキ</span><span class="p">,</span><span class="n">トウキョウスカイツリーエキ</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.tokenizer</span> <span class="k">import</span> <span class="n">Tokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">(</span><span class="s2">&quot;userdic.csv&quot;</span><span class="p">,</span> <span class="n">udic_enc</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;東京スカイツリーへのお越しは、東武スカイツリーライン「とうきょうスカイツリー駅」が便利です。&#39;</span><span class="p">):</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
<span class="gp">...</span>

<span class="go">東京スカイツリー         名詞,固有名詞,一般,*,*,*,東京スカイツリー,トウキョウスカイツリー,トウキョウスカイツリー</span>
<span class="go">へ        助詞,格助詞,一般,*,*,*,へ,ヘ,エ</span>
<span class="go">の        助詞,連体化,*,*,*,*,の,ノ,ノ</span>
<span class="go">お越し    名詞,一般,*,*,*,*,お越し,オコシ,オコシ</span>
<span class="go">は        助詞,係助詞,*,*,*,*,は,ハ,ワ</span>
<span class="go">、        記号,読点,*,*,*,*,、,、,、</span>
<span class="go">東武スカイツリーライン    名詞,固有名詞,一般,*,*,*,東武スカイツリーライン,トウブスカイツリーライン,トウブスカイツリーライン</span>
<span class="go">「        記号,括弧開,*,*,*,*,「,「,「</span>
<span class="go">とうきょうスカイツリー駅  名詞,固有名詞,一般,*,*,*,とうきょうスカイツリー駅,トウキョウスカイツリーエキ,トウキョウスカイツリーエキ</span>
<span class="go">」        記号,括弧閉,*,*,*,*,」,」,」</span>
<span class="go">が        助詞,格助詞,一般,*,*,*,が,ガ,ガ</span>
<span class="go">便利      名詞,形容動詞語幹,*,*,*,*,便利,ベンリ,ベンリ</span>
<span class="go">です      助動詞,*,*,*,特殊・デス,基本形,です,デス,デス</span>
<span class="go">。        記号,句点,*,*,*,*,。,。,。</span>
</pre></div>
</div>
</div>
<div class="section" id="simplified-dictionary-format-v0-2-7">
<h3>Simplified dictionary format (v0.2.7+)<a class="headerlink" href="#simplified-dictionary-format-v0-2-7" title="Permalink to this headline">¶</a></h3>
<p>Janome provides alternative simplified dictionary format similar to <a class="reference external" href="https://www.atilika.com/en/kuromoji/">Kuromoji</a> user dictionary. This format supports surface form, part-of-speech and reading only.</p>
<p>To use simplified dictionary format, create a CSV file that includes “&lt;surface form&gt;,&lt;part-of-speech&gt;,&lt;reading&gt;” in each line (see the example below) and pass the file path and the dictionary type <code class="docutils literal notranslate"><span class="pre">(udic_type='simpledic')</span></code> to Tokenizer’s constructor.</p>
<p>user_simpledic.csv</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">東京スカイツリー</span><span class="p">,</span><span class="n">カスタム名詞</span><span class="p">,</span><span class="n">トウキョウスカイツリー</span>
<span class="n">東武スカイツリーライン</span><span class="p">,</span><span class="n">カスタム名詞</span><span class="p">,</span><span class="n">トウブスカイツリーライン</span>
<span class="n">とうきょうスカイツリー駅</span><span class="p">,</span><span class="n">カスタム名詞</span><span class="p">,</span><span class="n">トウキョウスカイツリーエキ</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.tokenizer</span> <span class="k">import</span> <span class="n">Tokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">(</span><span class="s2">&quot;user_simpledic.csv&quot;</span><span class="p">,</span> <span class="n">udic_type</span><span class="o">=</span><span class="s2">&quot;simpledic&quot;</span><span class="p">,</span> <span class="n">udic_enc</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;東京スカイツリーへのお越しは、東武スカイツリーライン「とうきょうスカイツリー駅」が便 利です。&#39;</span><span class="p">):</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">東京スカイツリー     カスタム名詞,*,*,*,*,*,東京スカイツリー,トウキョウスカイツリー,トウキョウスカイツリー</span>
<span class="go">へ    助詞,格助詞,一般,*,*,*,へ,ヘ,エ</span>
<span class="go">の    助詞,連体化,*,*,*,*,の,ノ,ノ</span>
<span class="go">お越し    名詞,一般,*,*,*,*,お越し,オコシ,オコシ</span>
<span class="go">は    助詞,係助詞,*,*,*,*,は,ハ,ワ</span>
<span class="go">、    記号,読点,*,*,*,*,、,、,、</span>
<span class="go">東武スカイツリーライン   カスタム名詞,*,*,*,*,*,東武スカイツリーライン,トウブスカイツリーライン,トウブスカイツリーライン</span>
<span class="go">「    記号,括弧開,*,*,*,*,「,「,「</span>
<span class="go">とうきょうスカイツリー駅    カスタム名詞,*,*,*,*,*,とうきょうスカイツリー駅,トウキョウスカイツリーエキ,トウキョウスカイツリーエキ</span>
<span class="go"> 」   記号,括弧閉,*,*,*,*,」,」,」</span>
<span class="go">が    助詞,格助詞,一般,*,*,*,が,ガ,ガ</span>
<span class="go">便利    名詞,形容動詞語幹,*,*,*,*,便利,ベンリ,ベンリ</span>
<span class="go">です    助動詞,*,*,*,特殊・デス,基本形,です,デス,デス</span>
<span class="go">。    記号,句点,*,*,*,*,。,。,。</span>
</pre></div>
</div>
</div>
<div class="section" id="pre-compiled-user-dictionary">
<h3>Pre-compiled user dictionary<a class="headerlink" href="#pre-compiled-user-dictionary" title="Permalink to this headline">¶</a></h3>
<p>With large user dictionary, it can take much time to convert CSV file to the binary data structure. You can compile the user dictionary in advance and use that at runtime.</p>
<p>For now, there is no tools for compiling user dictionary. Use <a class="reference external" href="http://mocobeta.github.io/janome/api/janome.html#janome.dic.UserDictionary">APIs</a> as below.</p>
<p>How to compile user dictionary (MeCab IPADIC format):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.dic</span> <span class="k">import</span> <span class="n">UserDictionary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sysdic</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_dict</span> <span class="o">=</span> <span class="n">UserDictionary</span><span class="p">(</span><span class="s2">&quot;userdic.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;utf8&quot;</span><span class="p">,</span> <span class="s2">&quot;ipadic&quot;</span><span class="p">,</span> <span class="n">sysdic</span><span class="o">.</span><span class="n">connections</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_dict</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;/tmp/userdic&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>How to compile user dictionary (simplified format):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.dic</span> <span class="k">import</span> <span class="n">UserDictionary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sysdic</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_dict</span> <span class="o">=</span> <span class="n">UserDictionary</span><span class="p">(</span><span class="s2">&quot;user_simpledic.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;utf8&quot;</span><span class="p">,</span> <span class="s2">&quot;simpledic&quot;</span><span class="p">,</span> <span class="n">sysdic</span><span class="o">.</span><span class="n">connections</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_dict</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;/tmp/userdic&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once compiling has been successfully completed, the data is saved in <code class="docutils literal notranslate"><span class="pre">/tmp/userdic</span></code> directory. Pass the directory path to Tokenizer’s constructor to use it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">(</span><span class="s2">&quot;/tmp/userdic&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use same major python version at both compile time and runtime. Forward/backward dictionary data compatibility is not guaranteed.</p>
</div>
</div>
</div>
<div class="section" id="experimental-analyzer-framework-v0-3-4">
<h2>(experimental) Analyzer framework (v0.3.4+)<a class="headerlink" href="#experimental-analyzer-framework-v0-3-4" title="Permalink to this headline">¶</a></h2>
<p>Analyzer framework is for pre- and post- processing. Analyzer framework includes following classes.</p>
<ul class="simple">
<li><a class="reference external" href="http://mocobeta.github.io/janome/api/janome.html#janome.charfilter.CharFilter">CharFilter</a> class performs pre-processing such as character normalization.</li>
<li><a class="reference external" href="http://mocobeta.github.io/janome/api/janome.html#janome.tokenfilter.TokenFilter">TokenFilter</a> class performs post-processing such as lowercase/uppercase conversion, token filtering by POS tags.</li>
<li><a class="reference external" href="http://mocobeta.github.io/janome/api/janome.html#janome.analyzer.Analyzer">Analyzer</a> class combines CharFilters, a Tokenizer and TokenFilters to assemble custom analysis chain.</li>
</ul>
<div class="section" id="analyzser-usage">
<h3>Analyzser usage<a class="headerlink" href="#analyzser-usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.tokenizer</span> <span class="k">import</span> <span class="n">Tokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.analyzer</span> <span class="k">import</span> <span class="n">Analyzer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.charfilter</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.tokenfilter</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;蛇の目はPure Ｐｙｔｈｏｎな形態素解析器です。&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">char_filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">UnicodeNormalizeCharFilter</span><span class="p">(),</span> <span class="n">RegexReplaceCharFilter</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;蛇の目&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;janome&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token_filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">CompoundNounFilter</span><span class="p">(),</span> <span class="n">POSStopFilter</span><span class="p">([</span><span class="s1">&#39;記号&#39;</span><span class="p">,</span><span class="s1">&#39;助詞&#39;</span><span class="p">]),</span> <span class="n">LowerCaseFilter</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Analyzer</span><span class="p">(</span><span class="n">char_filters</span><span class="p">,</span> <span class="n">tokenizer</span><span class="p">,</span> <span class="n">token_filters</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">janome  名詞,固有名詞,組織,*,*,*,*,*,*</span>
<span class="go">pure    名詞,固有名詞,組織,*,*,*,*,*,*</span>
<span class="go">python  名詞,一般,*,*,*,*,*,*,*</span>
<span class="go">な       助動詞,*,*,*,特殊・ダ,体言接続,だ,ナ,ナ</span>
<span class="go">形態素解析器  名詞,複合,*,*,*,*,形態素解析器,ケイタイソカイセキキ,ケイタイソカイセキキ</span>
<span class="go">です     助動詞,*,*,*,特殊・デス,基本形,です,デス,デス</span>
</pre></div>
</div>
</div>
<div class="section" id="analyzer-usage-for-word-count-v0-3-5">
<h3>Analyzer usage for word count (v0.3.5+)<a class="headerlink" href="#analyzer-usage-for-word-count-v0-3-5" title="Permalink to this headline">¶</a></h3>
<p>You can count word frequencies in the input text by using TokenCountFilter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.tokenizer</span> <span class="k">import</span> <span class="n">Tokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.analyzer</span> <span class="k">import</span> <span class="n">Analyzer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.tokenfilter</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;すもももももももものうち&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token_filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">POSKeepFilter</span><span class="p">(</span><span class="s1">&#39;名詞&#39;</span><span class="p">),</span> <span class="n">TokenCountFilter</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Analyzer</span><span class="p">(</span><span class="n">token_filters</span><span class="o">=</span><span class="n">token_filters</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
<span class="gp">...</span>
<span class="go">すもも: 1</span>
<span class="go">もも: 2</span>
<span class="go">うち: 1</span>
</pre></div>
</div>
<p>See API reference for other built-in CharFilters and TokenFilters. You can implement custom filters by extending CharFilter or TokenFilter.</p>
</div>
</div>
<div class="section" id="streaming-mode-v0-3-1">
<h2>Streaming mode (v0.3.1+)<a class="headerlink" href="#streaming-mode-v0-3-1" title="Permalink to this headline">¶</a></h2>
<p>When <code class="docutils literal notranslate"><span class="pre">stream</span> <span class="pre">=</span> <span class="pre">True</span></code> option is given to tokenize() method, it runs on streaming mode. On streaming mode, partial analyzed results are returned through <a class="reference external" href="https://wiki.python.org/moin/Generators">generator</a> interface.</p>
<p>Use this option when you analyze very large text data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;very_large_text.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="wakati-gaki-mode-v0-3-1">
<h2>‘wakati-gaki’ mode (v0.3.1+)<a class="headerlink" href="#wakati-gaki-mode-v0-3-1" title="Permalink to this headline">¶</a></h2>
<p>When ‘wakati = True’ option is given to tokenize() method, it runs on ‘wakati-gaki’ (‘分かち書き’) mode. On wakati-gaki mode, tokenize() method returns sufrace forms only. Return type is a list of string, not list of Token.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tokens</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;分かち書きモードがつきました！&#39;</span><span class="p">,</span> <span class="n">wakati</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tokens</span>
<span class="go">[&#39;分かち書き&#39;, &#39;モード&#39;, &#39;が&#39;, &#39;つき&#39;, &#39;まし&#39;, &#39;た&#39;, &#39;！&#39;]</span>
</pre></div>
</div>
<p>If you use ‘wakati-gaki’ mode only, it is recommended to give <code class="docutils literal notranslate"><span class="pre">wakati</span> <span class="pre">=</span> <span class="pre">True</span></code> option to Tokenizer.__init__(). When Tokenizer object is initialized as below, extra information (detailed part of speech, reading, etc.) for tokens are not loaded from dictionary so the memory usage is reduced.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">(</span><span class="n">wakati</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>When this option is passed to Tokenizer object, tokenize() method always runs in wakati-gaki mode (<code class="docutils literal notranslate"><span class="pre">wakati</span> <span class="pre">=</span> <span class="pre">False</span></code> option is ignored.)</p>
<p>‘wakati-gaki’ mode works well with streaming mode. tokenize() method returns generator of string when it is given <code class="docutils literal notranslate"><span class="pre">stream=True</span></code> and <code class="docutils literal notranslate"><span class="pre">wakati=True</span></code> options.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">()</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">wakati</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="memory-mapped-file-support-v0-3-3">
<h2>Memory-mapped file support (v0.3.3+)<a class="headerlink" href="#memory-mapped-file-support-v0-3-3" title="Permalink to this headline">¶</a></h2>
<p>If <code class="docutils literal notranslate"><span class="pre">mmap=True</span></code> option is given to Tokenizer.__init__(), dictionary entries are not loaded to process space but searched through memory-mapped file.</p>
</div>
<div class="section" id="graphviz-file-dot-file-support-v0-3-7">
<h2>Graphviz file (DOT file) support (v0.3.7+)<a class="headerlink" href="#graphviz-file-dot-file-support-v0-3-7" title="Permalink to this headline">¶</a></h2>
<p>When <code class="docutils literal notranslate"><span class="pre">dotfile=&lt;dotfile</span> <span class="pre">output</span> <span class="pre">path&gt;</span></code> option is given, Tokenizer.tokenize() method converts the lattice graph to <a class="reference external" href="https://graphviz.gitlab.io/">Graphviz</a> DOT file. For performance reasons, this option is ignored when running on streaming mode or analyzing very long text.</p>
<p><code class="docutils literal notranslate"><span class="pre">janome</span></code> command (the details are mentioned later) has options to visualize the lattice graph easily.</p>
</div>
<div class="section" id="command-line-interface-linux-mac-v0-2-6-windows-v0-3-7">
<h2>Command-line interface (Linux/Mac v0.2.6+, Windows v0.3.7+)<a class="headerlink" href="#command-line-interface-linux-mac-v0-2-6-windows-v0-3-7" title="Permalink to this headline">¶</a></h2>
<p>Janome has executable built-in script “janome” for command-line usage.</p>
<p>It reads a sentence at a time from standard input and outputs the analyzed results. To see supported options, type “janome -h”.</p>
<div class="section" id="linux-mac">
<h3>Linux/Mac<a class="headerlink" href="#linux-mac" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(env)$ janome
猫は液体である
猫    名詞,一般,*,*,*,*,猫,ネコ,ネコ
は    助詞,係助詞,*,*,*,*,は,ハ,ワ
液体  名詞,一般,*,*,*,*,液体,エキタイ,エキタイ
で    助動詞,*,*,*,特殊・ダ,連用形,だ,デ,デ
ある  助動詞,*,*,*,五段・ラ行アル,基本形,ある,アル,アル
(Type Ctrl-C to quit.)
</pre></div>
</div>
</div>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">-e</span> <span class="pre">sjis</span></code> option if the output is garbled.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span><span class="n">janome</span> <span class="o">-</span><span class="n">e</span> <span class="n">sjis</span>
<span class="n">ウィンドウズでも簡単インストール</span>
<span class="n">ウィンドウズ</span>    <span class="n">名詞</span><span class="p">,</span><span class="n">固有名詞</span><span class="p">,</span><span class="n">一般</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">ウィンドウズ</span><span class="p">,</span><span class="n">ウィンドウズ</span><span class="p">,</span><span class="n">ウィンドウズ</span>
<span class="n">で</span>      <span class="n">助詞</span><span class="p">,</span><span class="n">格助詞</span><span class="p">,</span><span class="n">一般</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">で</span><span class="p">,</span><span class="n">デ</span><span class="p">,</span><span class="n">デ</span>
<span class="n">も</span>      <span class="n">助詞</span><span class="p">,</span><span class="n">係助詞</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">も</span><span class="p">,</span><span class="n">モ</span><span class="p">,</span><span class="n">モ</span>
<span class="n">簡単</span>    <span class="n">名詞</span><span class="p">,</span><span class="n">形容動詞語幹</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">簡単</span><span class="p">,</span><span class="n">カンタン</span><span class="p">,</span><span class="n">カンタン</span>
<span class="n">インストール</span>    <span class="n">名詞</span><span class="p">,</span><span class="n">一般</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">インストール</span><span class="p">,</span><span class="n">インストール</span><span class="p">,</span><span class="n">インストール</span>
<span class="p">(</span><span class="n">Type</span> <span class="n">Ctrl</span><span class="o">-</span><span class="n">Z</span> <span class="n">to</span> <span class="n">quit</span><span class="o">.</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="visualizing-lattice-graph">
<h3>Visualizing lattice graph<a class="headerlink" href="#visualizing-lattice-graph" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need Graphviz to use this functionality. Please install Graphviz from <a class="reference external" href="https://graphviz.gitlab.io/download/">here</a>.</p>
</div>
<p>If given <code class="docutils literal notranslate"><span class="pre">-g</span></code> option, janome command outputs the visualized lattice image to the current directory after analyzing the text. Default output format is PNG.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo &quot;カレーは飲み物&quot; | janome -g
カレー 名詞,一般,*,*,*,*,カレー,カレー,カレー
は   助詞,係助詞,*,*,*,*,は,ハ,ワ
飲み物 名詞,一般,*,*,*,*,飲み物,ノミモノ,ノミモノ
Graph was successfully output to lattice.gv.png
</pre></div>
</div>
<p>lattice.gv.png (Click to show the full size image.)</p>
<a class="reference internal image-reference" href="_images/lattice.gv.png"><img alt="_images/lattice.gv.png" src="_images/lattice.gv.png" style="width: 384.6px; height: 346.6px;" /></a>
<p>You can change the output file location by using <code class="docutils literal notranslate"><span class="pre">--gv-out</span></code> option. Also you can specify the output file format by <code class="docutils literal notranslate"><span class="pre">--gv-format</span></code> option. See <a class="reference external" href="https://graphviz.gitlab.io/_pages/doc/info/output.html">Graphviz documentation</a> for all supported output formats.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo &quot;カレーは飲み物&quot; | janome -g --gv-out /tmp/a.gv --gv-format svg
...
Graph was successfully output to /tmp/a.gv.svg
</pre></div>
</div>
</div>
</div>
<div class="section" id="note-for-analyzing-large-document-set">
<h2>Note for analyzing large document set<a class="headerlink" href="#note-for-analyzing-large-document-set" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This memory leak problem was solved at v0.3. The analyzed results with version 0.3 or over can be a bit different from ones with version 0.2. You may want to examine streaming and/or wakati-gaki mode to reduce memory usage more.</p>
</div>
<p>In older version (&lt; 0.3), Janome can consume large memory when a very large document is passed all at once. Please split large documents (larger than tens of killobytes) into small chunks or sentences.</p>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h2>
<ol class="upperalpha simple" start="17">
<li>How is the accuracy of analysis?</li>
</ol>
<ol class="upperalpha simple">
<li>Janome uses MeCab IPADIC dictionary, so the accuracy is roughly same to MeCab.</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>How is the speed of analysis?</li>
</ol>
<ol class="upperalpha simple">
<li>Basically depends on the input length. According to my benchmark script, one sentence would take a few milliseconds to a few tens of milliseconds on commodity PCs.</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>What data structures and algorithms are used?</li>
</ol>
<ol class="upperalpha simple">
<li>Janome uses FST (<a class="reference external" href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.24.3698">Minimal Acyclic Subsequential Transducer</a>) for internal dictionary data structure. I implemented the automaton by referring to <a class="reference external" href="https://lucene.apache.org/core/">Apache Lucene</a> (written in Java) and <a class="reference external" href="https://github.com/ikawaha/kagome">kagome</a> (written in Go). And for analysis engine, I implemented basic viterbi algorithm by referring the book <a class="reference external" href="http://www.amazon.co.jp/%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E%E5%87%A6%E7%90%86%E3%81%AE%E5%9F%BA%E7%A4%8E-%E5%A5%A5%E6%9D%91-%E5%AD%A6/dp/4339024511">自然言語処理の基礎</a> .</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>I found bugs. Or have requests for enhancement.</li>
</ol>
<ol class="upperalpha simple">
<li>Bug reports or requests (and of course, patches) are welcome. Create issues in <a class="reference external" href="https://github.com/mocobeta/janome/issues">Github repository</a> or leave your comment to <a class="reference external" href="https://gitter.im/janome-python/en">Gitter room</a>.</li>
</ol>
</div>
<div class="section" id="for-contributors">
<h2>For Contributors<a class="headerlink" href="#for-contributors" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="https://github.com/mocobeta/janome/wiki">https://github.com/mocobeta/janome/wiki</a></p>
</div>
<div class="section" id="author">
<h2>Author<a class="headerlink" href="#author" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://medium.com/&#64;mocobeta/about-me-b28838ba631f">Profile</a></p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>Licensed under Apache License 2.0 and uses the MeCab-IPADIC dictionary/statistical model.</p>
<p>See <a class="reference external" href="https://github.com/mocobeta/janome/blob/master/LICENSE.txt">LICENSE.txt</a> and <a class="reference external" href="https://github.com/mocobeta/janome/blob/master/NOTICE.txt">NOTICE.txt</a> for license details.</p>
</div>
<div class="section" id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h2>
<p>Copyright(C) 2015, Tomoko Uchida. All rights reserved.</p>
</div>
<div class="section" id="history">
<h2>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>2018.04.03 janome Version 0.3.8 was released</li>
<li>2018.12.11 janome Version 0.3.7 was released</li>
<li>2017.12.07 janome Version 0.3.6 was released</li>
<li>2017.08.06 janome Version 0.3.5 was released</li>
<li>2017.07.29 janome Version 0.3.4 was released</li>
<li>2017.07.23 janome Version 0.3.3 was released</li>
<li>2017.07.05 janome Version 0.3.2 was released</li>
<li>2017.07.02 janome Version 0.3.1 was released</li>
<li>2017.06.30 janome Version 0.3.0 was released</li>
<li>2016.05.07 janome Version 0.2.8 was released</li>
<li>2016.03.05 janome Version 0.2.7 was released</li>
<li>2015.10.26 janome Version 0.2.6 was released</li>
<li>2015.05.11 janome Version 0.2.5 was released</li>
<li>2015.05.03 janome Version 0.2.4 was released</li>
<li>2015.05.03 janome Version 0.2.3 was released</li>
<li>2015.04.24 janome Version 0.2.2 was released</li>
<li>2015.04.24 janome Version 0.2.0 was released</li>
<li>2015.04.11 janome Version 0.1.4 was released</li>
<li>2015.04.08 janome Version 0.1.3 was released</li>
</ul>
<p>Change details: <a class="reference external" href="https://github.com/mocobeta/janome/blob/master/CHANGES.txt">CHANGES</a></p>
<a class="reference external image-reference" href="http://www.unicode.org/consortium/adopt-a-character.html"><img alt="Badge(FISHEYE)" src="_images/bronze-25C9.png" /></a>
<p><a class="reference external" href="http://mocobeta-backup.tumblr.com/post/153598031477/u-25c9-sponsorship-en">About this badge</a></p>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="#">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Tomoko Uchida.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>