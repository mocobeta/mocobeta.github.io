<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to janome’s documentation! &mdash; Janome 0.1.3 ドキュメント</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="top" title="Janome 0.1.3 ドキュメント" href="#" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><h1 class="heading"><a href="#">
          <span>Janome 0.1.3 ドキュメント</span></a></h1>
        <h2 class="heading"><span>Welcome to janome’s documentation!</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="#">コンテンツ</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="welcome-to-janome-s-documentation">
<h1>Welcome to janome&#8217;s documentation!<a class="headerlink" href="#welcome-to-janome-s-documentation" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="janome">
<h2>Janome とは<a class="headerlink" href="#janome" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Janome (蛇の目) は, Pure Python で書かれた, 辞書内包の形態素解析器です.</p>
<p>依存ライブラリなしで簡単にインストールでき, アプリケーションに組み込みやすいシンプルな API を備える形態素解析ライブラリを目指しています.</p>
<p>内包辞書として mecab-ipadic-2.7.0-20070801 を使っています.</p>
</div>
<div class="section" id="id1">
<h2>ソースコードリポジトリ<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference external" href="https://github.com/mocobeta/janome">https://github.com/mocobeta/janome</a></p>
<p>master リポジトリが janome 用, 2x_support ブランチが janomePy2 用です.</p>
</div>
<div class="section" id="id2">
<h2>動作に必要なソフトウェア<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Python 2.7 または Python 3.4+ インタプリタ</p>
</div>
<div class="section" id="id3">
<h2>バージョン<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>janome (for Python 3) と janomePy2 (for Python 2.7) があります. minor version が同じなら同等の動作をします.</p>
<ul class="simple">
<li>janome: 0.1.4</li>
<li>janomePy2: 0.1.4</li>
</ul>
</div>
<div class="section" id="id4">
<h2>インストール<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pypi">
<h3>PyPI<a class="headerlink" href="#pypi" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>注意: バイナリ配布だと、PyPI のサイズ制限に引っかかったため、ソース配布になっています。ビルド時にそれなりのメモリを必要とします(最大3GB程度の様子). 貧弱なマシンや、他の重い処理が走っているときに同時にビルドするとマシンが凍る可能性がありますのでご注意ください.</p>
<p>for Python 3.4+ users: <a class="reference external" href="https://pypi.python.org/pypi/Janome">https://pypi.python.org/pypi/Janome</a></p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install janome
</pre></div>
</div>
<p>for Python 2.7 users: <a class="reference external" href="https://pypi.python.org/pypi/JanomePy2">https://pypi.python.org/pypi/JanomePy2</a></p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install janomePy2
</pre></div>
</div>
</div>
</div>
<div class="section" id="id5">
<h2>使い方<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>janome.tokenizer パッケージの Tokenizer オブジェクトを作り, tokenize() メソッドに解析したい文字列を渡します.</p>
<p>戻り値は Token オブジェクトのリストです. Token は表層形や品詞といった形態素情報を含みます. 詳しくは help() や <a class="reference external" href="https://github.com/mocobeta/janome/blob/master/janome/tokenizer.py">ソースコード</a> をご参照ください.</p>
<div class="highlight-python"><div class="highlight"><pre>(venv) $ python
&gt;&gt;&gt; from janome.tokenizer import Tokenizer
&gt;&gt;&gt; t = Tokenizer()
&gt;&gt;&gt; for token in t.tokenize(u&#39;すもももももももものうち&#39;):
...     print(token)
...
すもも 名詞,一般,*,*,*,*,すもも,スモモ,スモモ
も    助詞,係助詞,*,*,*,*,も,モ,モ
もも  名詞,一般,*,*,*,*,もも,モモ,モモ
も    助詞,係助詞,*,*,*,*,も,モ,モ
もも  名詞,一般,*,*,*,*,もも,モモ,モモ
の    助詞,連体化,*,*,*,*,の,ノ,ノ
うち  名詞,非自立,副詞可能,*,*,*,うち,ウチ,ウチ
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h2>ユーザー定義辞書を使う<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ユーザー定義辞書のフォーマットは, Mecab 辞書と同じです. たとえば以下のような CSV ファイルを作成し, Tokenizer クラスの初期化時にファイルパスとエンコーディングを指定します.</p>
<p>辞書フォーマットは MeCab の <a class="reference external" href="http://mecab.googlecode.com/svn/trunk/mecab/doc/dic.html">ドキュメント</a> をご参照ください.</p>
<p>userdic.csv</p>
<div class="highlight-python"><div class="highlight"><pre>東京スカイツリー,1288,1288,4569,名詞,固有名詞,一般,*,*,*,東京スカイツリー,トウキョウスカイツリー,トウキョウスカイツリー
東武スカイツリーライン,1288,1288,4700,名詞,固有名詞,一般,*,*,*,東武スカイツリーライン,トウブスカイツリーライン,トウブスカイツリーライン
とうきょうスカイツリー駅,1288,1288,4143,名詞,固有名詞,一般,*,*,*,とうきょうスカイツリー駅,トウキョウスカイツリーエキ,トウキョウスカイツリーエキ
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(venv) $ python
&gt;&gt;&gt; from janome.tokenizer import Tokenizer
&gt;&gt;&gt; t = Tokenizer(udic=&quot;userdic.csv&quot;, udic_enc=&quot;utf8&quot;)
&gt;&gt;&gt; for token in t.tokenize(u&#39;東京スカイツリーへのお越しは、東武スカイツリーライン「とうきょうスカイツリー駅」が便利です。&#39;):
...   print(token)
...

東京スカイツリー      名詞,固有名詞,一般,*,*,*,東京スカイツリー,トウキョウスカイツリー,トウキョウスカイツリー
へ     助詞,格助詞,一般,*,*,*,へ,ヘ,エ
の         助詞,連体化,*,*,*,*,の,ノ,ノ
お越し   名詞,一般,*,*,*,*,お越し,オコシ,オコシ
は         助詞,係助詞,*,*,*,*,は,ハ,ワ
、         記号,読点,*,*,*,*,、,、,、
東武スカイツリーライン   名詞,固有名詞,一般,*,*,*,東武スカイツリーライン,トウブスカイツリーライン,トウブスカイツリーライン
「         記号,括弧開,*,*,*,*,「,「,「
とうきょうスカイツリー駅  名詞,固有名詞,一般,*,*,*,とうきょうスカイツリー駅,トウキョウスカイツリーエキ,トウキョウスカイツリーエキ
」         記号,括弧閉,*,*,*,*,」,」,」
が         助詞,格助詞,一般,*,*,*,が,ガ,ガ
便利    名詞,形容動詞語幹,*,*,*,*,便利,ベンリ,ベンリ
です      助動詞,*,*,*,特殊・デス,基本形,です,デス,デス
。     記号,句点,*,*,*,*,。,。,。
</pre></div>
</div>
<div class="section" id="id9">
<h3>コンパイル済みのユーザー辞書を使う<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ユーザー定義辞書は, 巨大になるとバイナリコンパイルに時間がかかるため, あらかじめコンパイルしておき, コンパイル済みの辞書を使うことも可能です.</p>
<p>現在のところ, コンパイルのためのツールはありませんが, API を使ってコンパイルが行えます.</p>
<p>辞書のコンパイル</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">janome.dic</span> <span class="kn">import</span> <span class="n">UserDictionary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sysdic</span> <span class="kn">import</span> <span class="n">connections</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_dict</span> <span class="o">=</span> <span class="n">UserDictionary</span><span class="p">(</span><span class="s">&quot;userdic.csv&quot;</span><span class="p">,</span> <span class="s">&quot;utf8&quot;</span><span class="p">,</span> <span class="s">&quot;ipadic&quot;</span><span class="p">,</span> <span class="n">connections</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_dict</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&quot;/tmp/userdic&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>これで, /tmp/userdic 以下にコンパイル済みのユーザー辞書が保存されます. 使うときは Tokenizer のコンストラクタにディレクトリのパスを指定します.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="p">(</span><span class="s">&quot;/tmp/userdic&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id10">
<h2>よくある（かもしれない）質問<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ol class="upperalpha simple" start="17">
<li>Tokenizer の初期化が遅いんだけど.</li>
</ol>
<ol class="upperalpha simple">
<li>インタプリタ起動直後の, 初回の Tokenizer インスタンス生成時に, システム辞書を読み込むのですが, 現在のバージョンでは1~2秒かかる仕様です. 2回目以降はシステム辞書がすでに読み込まれているため速くなります. 今後改善していきたいのですが, 現行ではご勘弁ください. (そのため, インタプリタをしょっちゅう再起動するようなユースケースだと厳しいです.)</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>解析結果の精度は.</li>
</ol>
<ol class="upperalpha simple">
<li>辞書, 言語モデルともに MeCab のデフォルトシステム辞書をそのまま使わせていただいているため, バグがなければ, MeCab と同等の解析結果になると思います.</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>形態素解析の速度は.</li>
</ol>
<ol class="upperalpha simple">
<li>文章の長さによりますが, 手元の PC では 1 センテンスあたり数ミリ〜数十ミリ秒といったところのようです. mecab-python の10倍程度(長い文章だとそれ以上)遅い, というところでしょうか. 性能向上させていきたいですが, いまのところは速度を追うのがメインの目的ではないです.</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>実装（データ構造, アルゴリズム）について.</li>
</ol>
<ol class="upperalpha simple">
<li>辞書は, FST (正確には Minimal Acyclic Subsequential Transducer, <a class="reference external" href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.24.3698">論文</a>) を使っています. 実装は <a class="reference external" href="https://lucene.apache.org/core/">Apache Lucene</a> (Kuromoji) と <a class="reference external" href="https://github.com/ikawaha/kagome">Kagome</a> を参考にさせていただきました. エンジンはオーソドックスなビタビで, ほぼ <a class="reference external" href="http://www.amazon.co.jp/%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E%E5%87%A6%E7%90%86%E3%81%AE%E5%9F%BA%E7%A4%8E-%E5%A5%A5%E6%9D%91-%E5%AD%A6/dp/4339024511">自然言語処理の基礎</a> の3章だけ読んで書きました.</li>
</ol>
<p>Janome は Lucene の単語辞書やクエリパーサで使われている FST について調べていて生まれました. もしも内部実装にご興味があれば, 以下もどうぞ.</p>
<ul class="simple">
<li><a class="reference external" href="http://mocobeta-backup.tumblr.com/post/111076688132/lucene-fst-1">Lucene FST のアルゴリズム (1) ～図解編～</a></li>
<li><a class="reference external" href="http://mocobeta-backup.tumblr.com/post/113693778372/lucene-fst-2">Lucene FST のアルゴリズム (2) 〜実装編〜</a></li>
</ul>
<ol class="upperalpha simple" start="17">
<li>Python 2 系への対応は.</li>
</ol>
<ol class="upperalpha simple">
<li>デスヨネー. -&gt; 対応しました. janomePy2 をご利用ください.</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>学習器ついてないの.</li>
</ol>
<ol class="upperalpha simple">
<li>今のところありません.</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>Janome ってどういう意味.</li>
</ol>
<ol class="upperalpha simple">
<li>ikawaha さんの, Go で書かれた形態素解析器 Kagome にあやかりつつ, 蛇(Python)をかけて命名しました. 日本語のJaともかかっているのは takuya-a さんに言われて気づきました :)</li>
</ol>
<ol class="upperalpha simple" start="17">
<li><a class="reference external" href="https://github.com/neologd/mecab-ipadic-neologd">neologd</a> 内包版はないの.</li>
</ol>
<ol class="upperalpha simple">
<li>やりたいです!</li>
</ol>
<ol class="upperalpha simple" start="17">
<li>バグ見つけた or なんか変 or 改善要望</li>
</ol>
<ol class="upperalpha simple">
<li><a class="reference external" href="https://twitter.com/moco_beta">&#64;moco_beta</a> 宛につぶやくか, Github リポジトリに <a class="reference external" href="https://github.com/mocobeta/janome/issues">Issue</a> 立ててください.</li>
</ol>
</div>
<div class="section" id="id13">
<h2>やりたいことリスト<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>単語グラフ(ラティス)の可視化</li>
<li>neologd 対応</li>
<li>UniDic 対応</li>
<li>N-Best パス</li>
<li>API ドキュメント</li>
<li>SEARCH モード (検索のリコール向上を目的としたモード)</li>
<li>Lucene の Analyzer みたいに, 文字フィルタやトークンフィルタがあったら便利そう</li>
</ul>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Apache License 2.0</p>
</div>
<div class="section" id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Copyright(C) 2015, &#64;moco_beta All rights reserved.</p>
</div>
<div class="section" id="history">
<h2>History<a class="headerlink" href="#history" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>2015.04.11 janome Version 0.1.4 リリース / janomePy2 0.1.4 公開</li>
<li>2015.04.08 janome Version 0.1.3 公開</li>
</ul>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="#">コンテンツ</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Tomoko Uchida.
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1 で生成しました。
    </div>
  </body>
</html>